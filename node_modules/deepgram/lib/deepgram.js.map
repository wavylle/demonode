{"version":3,"sources":["../src/deepgram.js"],"names":[],"mappings":"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","file":"deepgram.js","sourcesContent":["import 'isomorphic-fetch'\nimport Frisbee from 'frisbee'\n\nexport default class Deepgram {\n  constructor( opts ) {\n    this.opts = opts || {}\n\n    this.api = new Frisbee({\n      baseURI: 'http://api.deepgram.com',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n  }\n\n  indexContent( dataUrl ) {\n    var payload = { action: 'index_content', data_url: dataUrl }\n    return new Promise( (resolve, reject) => {\n      this.api.post( '/', this._authenticatedPayload( payload) )\n        .then( (data) => resolve(data.body.contentID) )\n        .catch( (err) => reject(err) )\n    })\n  }\n\n  getBalance() {\n    var payload = { action: 'get_balance' }\n    return new Promise( (resolve, reject) => {\n      this.api.post( '/', this._authenticatedPayload( payload) )\n        .then( (data) => resolve(data.body.balance) )\n        .catch( (err) => reject(err) )\n    })\n  }\n\n  getObjectStatus( contentID ) {\n    var payload = { action: 'get_object_status', contentID: contentID }\n    return new Promise( (resolve, reject) => {\n      this.api.post( '/', this._authenticatedPayload( payload) )\n        .then( (data) => resolve(data.body.status) )\n        .catch( (err) => reject(err) )\n    })\n  }\n\n  getObjectTranscript( contentID ) {\n    var payload = { action: 'get_object_transcript', contentID: contentID }\n    return new Promise( (resolve, reject) => {\n      this.api.post( '/', this._authenticatedPayload( payload) )\n        .then( (data) => resolve(data.body) )\n        .catch( (err) => reject(err) )\n    })\n  }\n\n  objectSearch( query ) {\n    var payload = query || { }\n    payload.action = 'object_search'\n\n    return new Promise( (resolve, reject) => {\n      this.api.post( '/', this._authenticatedPayload( payload) )\n        .then( (data) => resolve(data.body) )\n        .catch( (err) => reject(err) )\n    })\n  }\n\n  _authenticatedPayload( object ) {\n    var wrapper = {}\n    object.userID = this.opts.userId\n    wrapper.body = JSON.stringify( object )\n    return wrapper\n  }\n}\n"]}